window.addEventListener("load",()=>{document.querySelector(".preloader").classList.add("opacity"),setTimeout((function(){document.querySelector(".preloader").style.display="none"}),1e3)});const body=document.body,main=document.querySelector(".main"),themeBtn=document.querySelector(".color"),themeBtnIcon=document.querySelector(".color i"),themeRed=document.querySelector(".theme-red"),themeBlue=document.querySelector(".theme-blue"),themeGreen=document.querySelector(".theme-green"),themePink=document.querySelector(".theme-pink"),themeOrange=document.querySelector(".theme-orange"),themeDark=document.querySelector(".color__theme-dark");function changeTheme(e){body.className="",body.classList.add(e),localStorage.setItem("colorThemes",body.className)}themeBtnIcon.addEventListener("click",()=>{themeBtn.classList.toggle("active")}),document.addEventListener("DOMContentLoaded",e=>{"dark"===localStorage.getItem("mode")?main.classList.add("dark"):main.classList.remove("dark")}),themeDark.addEventListener("click",()=>{themeDark.classList.toggle("active"),main.classList.toggle("dark"),main.classList.contains("dark")?localStorage.setItem("mode","dark"):localStorage.setItem("mode","")}),document.addEventListener("DOMContentLoaded",e=>{localStorage.getItem("colorThemes")&&body.classList.add(localStorage.getItem("colorThemes"))});const filterContainer=document.querySelector(".portfolio__filter"),filterPortfolioItems=document.querySelectorAll(".portfolio__item"),filterBtns=filterContainer.children;for(let e=0;e<filterBtns.length;e++)filterBtns[e].addEventListener("click",(function(){filterContainer.querySelector(".active").classList.remove("active"),this.classList.add("active");const e=this.getAttribute("data-filter");for(let t=0;t<filterPortfolioItems.length;t++)e===filterPortfolioItems[t].getAttribute("data-category")?(filterPortfolioItems[t].classList.remove("hide"),filterPortfolioItems[t].classList.add("show")):(filterPortfolioItems[t].classList.add("hide"),filterPortfolioItems[t].classList.remove("show")),"all"===e&&(filterPortfolioItems[t].classList.remove("hide"),filterPortfolioItems[t].classList.add("show"))}));const portfolioItems=document.querySelectorAll(".portfolio__item"),portfolioItemsInner=document.querySelectorAll(".portfolio__item-inner"),portfolioTitle=document.querySelectorAll(".portfolio__info-title"),lightbox=document.querySelector(".lightbox"),lightboxClose=document.querySelector(".lightbox__close"),lightboxImg=document.querySelector(".lightbox__img"),lightboxTitle=document.querySelector(".lightbox__title"),lightboxDescription=document.querySelector(".lightbox__description"),lightboxCounter=document.querySelector(".lightbox__counter"),lightboxPrev=document.querySelector(".lightbox__controls-prev"),lightboxNext=document.querySelector(".lightbox__controls-next");let count=0;for(let e=0;e<portfolioItems.length;e++)portfolioItemsInner[e].addEventListener("click",()=>{count=e,toggleLightbox(),changeItem()});function toggleLightbox(){lightbox.classList.add("open")}function changeItem(){let e=portfolioItems[count].querySelector("img").getAttribute("src");lightboxImg.src=e,lightboxTitle.innerHTML=portfolioItems[count].querySelector("h4").innerHTML+'&nbsp;&nbsp;&nbsp;<i class="fa fa-eye"></i>',lightboxTitle.href=portfolioItems[count].querySelector("a").getAttribute("href"),lightboxDescription.innerHTML=portfolioItems[count].querySelector("p").innerHTML,lightboxCounter.innerHTML=`${count+1} из ${portfolioItems.length}`,console.log(portfolioItems[count].querySelector("a").getAttribute("href"))}lightboxNext.addEventListener("click",()=>{count===portfolioItems.length-1?count=0:count++,changeItem()}),lightboxImg.addEventListener("click",()=>{count===portfolioItems.length-1?count=0:count++,changeItem()}),lightboxPrev.addEventListener("click",()=>{0===count?count=portfolioItems.length-1:count--,changeItem()}),lightboxClose.addEventListener("click",()=>{lightbox.classList.remove("open")}),lightbox.addEventListener("click",e=>{e.target===lightbox&&lightbox.classList.remove("open")});const menuLink=document.querySelectorAll(".aside__item-link"),menuItem=document.querySelectorAll(".aside__item"),section=document.querySelectorAll(".section");section.forEach(e=>{e.classList.add("fixed")});for(let e=0;e<menuLink.length;e++)menuLink[e].addEventListener("click",(function(){removeBackSectionClass();for(let e=0;e<menuLink.length;e++)menuItem[e].querySelector("a").classList.contains("active")&&addBackSectionClass(e),menuLink[e].classList.remove("active");this.classList.add("active"),showSection(this)}));function removeBackSectionClass(){section.forEach(e=>{e.classList.remove("back-section")})}function addBackSectionClass(e){section[e].classList.add("back-section")}function showSection(e){let t=e.getAttribute("href").split("#")[1];section.forEach(e=>{e.classList.remove("active")}),document.querySelector("#"+t).classList.add("active")}function updateNav(e){for(let t=0;t<menuLink.length;t++){menuLink[t].classList.remove("active"),e.getAttribute("href").split("#")[1]===menuLink[t].getAttribute("href").split("#")[1]&&menuLink[t].classList.add("active")}}document.querySelector(".hire-me").addEventListener("click",(function(){const e=this.getAttribute("data-section-index");showSection(this),updateNav(this),removeBackSectionClass(),addBackSectionClass(e)}));const selectLang=document.querySelector(".change-lang");let lang=selectLang.checked;function changeLang(){for(let e in langArr)selectLang.checked?document.querySelector(".lng-"+e).innerHTML=""+langArr[e].en:document.querySelector(".lng-"+e).innerHTML=""+langArr[e].ru}function send(e,t){console.log("Отправка запроса"),e.preventDefault?e.preventDefault():e.returnValue=!1;var o=new XMLHttpRequest;o.open("POST",t,!0),o.onload=function(){o.status>=200&&o.status<400?(json=JSON.parse(this.response),console.log(json),"success"==json.result?alert("Сообщение отправлено"):alert("Ошибка. Сообщение не отправлено")):alert("Ошибка сервера. Номер: "+o.status)},o.onerror=function(){alert("Ошибка отправки запроса")},o.send(new FormData(e.target))}selectLang.addEventListener("change",changeLang);